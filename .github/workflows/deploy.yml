name: Deploy to GitHub Pages

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pages: write
      id-token: write
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Create config file
        run: |
          echo '// Configuration for Inventory App' > config.js
          echo 'window.CONFIG = {' >> config.js
          echo '    apiUrl: "https://withered-star-d658alamak.dz-projects1234.workers.dev/api",' >> config.js
          echo '    appName: "Basement Supply Inventory",' >> config.js
          echo '    version: "1.0.0"' >> config.js
          echo '};' >> config.js
          echo 'âœ… Config file created'
      
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./
